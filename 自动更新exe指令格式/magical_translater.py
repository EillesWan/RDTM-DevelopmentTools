_A=False
import uuid
def isfloatable(O0O00OOOO0OO0O000):
	try:float(O0O00OOOO0OO0O000);return True
	except:return _A
def autoTranslate(O000000O0O000OOO0):
	K='detect';J='run';I='\\"';H='';G='execute';F=']';E='[';D='@';C='~';B='^';A=' '
	if not G in O000000O0O000OOO0:return O000000O0O000OOO0
	elif J in O000000O0O000OOO0:return O000000O0O000OOO0[:O000000O0O000OOO0.find(J)+4]+autoTranslate(O000000O0O000OOO0[O000000O0O000OOO0.find(J)+4:])
	__=str(uuid.uuid4());O000O000OO0OOOO00=[(I,__)]if I in O000000O0O000OOO0 else[];O000000O0O000OOO0=O000000O0O000OOO0.replace(I,__)if I in O000000O0O000OOO0 else O000000O0O000OOO0
	def O0OO0OO0O0000OO0O(O0O0O000OOO0000OO,OOOO0O0O0O00O0O0O,O0O0O000OOOO0000O):
		O000OO0OO0O00OOOO=_A;OO0OO0O000OOOO0OO=H
		for O0000OO0O0O000OO0 in O0O0O000OOO0000OO:
			if O000OO0OO0O00OOOO:
				if O0000OO0O0O000OO0==O0O0O000OOOO0000O:O000OO0OO0O00OOOO=_A;OOO0O0OO00OOO0O0O='{}'.format(OO0OO0O000OOOO0OO);OO0OOO000OOOO0OO0=str(uuid.uuid4());O0O0O000OOO0000OO=O0O0O000OOO0000OO.replace(OOO0O0OO00OOO0O0O,OO0OOO000OOOO0OO0);O000O000OO0OOOO00.append((OOO0O0OO00OOO0O0O,OO0OOO000OOOO0OO0));OO0OO0O000OOOO0OO=H # type: ignore
				else:OO0OO0O000OOOO0OO+=O0000OO0O0O000OO0
			elif O0000OO0O0O000OO0==OOOO0O0O0O00O0O0O:O000OO0OO0O00OOOO=True
		return O0O0O000OOO0000OO
	O000000O0O000OOO0=(O000000O0O000OOO0[:O000000O0O000OOO0.find(D)+2]+O000000O0O000OOO0[O000000O0O000OOO0.find(E):]if sum(0 if OOO00O0OO00OOOOO0==A else 1 for OOO00O0OO00OOOOO0 in O000000O0O000OOO0[O000000O0O000OOO0.find(D)+2:O000000O0O000OOO0.find(E)])==0 else O000000O0O000OOO0).replace('/',A).lower();O000000O0O000OOO0=O0OO0OO0O0000OO0O(O0OO0OO0O0000OO0O(O0OO0OO0O0000OO0O(O000000O0O000OOO0,'"','"'),E,F),'{','}');O000000O0O000OOO0=list(O000000O0O000OOO0)
	for O0000OOOO0OOOO0O0 in range(len(O000000O0O000OOO0)):
		if O000000O0O000OOO0[O0000OOOO0OOOO0O0]in(B,C):
			OOO0OO00O0O0OOO00=O0000OOOO0OOOO0O0+1
			while isfloatable(H.join(O000000O0O000OOO0[O0000OOOO0OOOO0O0+1:OOO0OO00O0O0OOO00+1]))or O000000O0O000OOO0[O0000OOOO0OOOO0O0+1]=='-'and isfloatable(H.join(O000000O0O000OOO0[O0000OOOO0OOOO0O0+1:OOO0OO00O0O0OOO00+2])):OOO0OO00O0O0OOO00+=1
			if O000000O0O000OOO0[OOO0OO00O0O0OOO00]==A or isfloatable(O000000O0O000OOO0[OOO0OO00O0O0OOO00]):continue
			else:O000000O0O000OOO0.insert(OOO0OO00O0O0OOO00,A)
	O000000O0O000OOO0=H.join(O000000O0O000OOO0)
	def OO0O00OO00OO000O0(OOO0OOO0000OOOOOO):
		for(O00O00O00OOOOO0O0,O0O0OOO0O00O00OOO)in O000O000OO0OOOO00[::-1]:OOO0OOO0000OOOOOO=OOO0OOO0000OOOOOO.replace(O0O0OOO0O00O00OOO,O00O00O00OOOOO0O0)
		return OOO0OOO0000OOOOOO
	if K in O000000O0O000OOO0[:O000000O0O000OOO0.find(G,8)if G in O000000O0O000OOO0[8:]else-1]:___=[O0000OO0OOO0OOOOO for OOO000OOO0O000O00 in[[O0O0OOO0OO0OOO000]if sum([isfloatable(_O000OOOO00O00000O)for _O000OOOO00O00000O in O0O0OOO0OO0OOO000])else([C+OO00OO00000OO0O00 for OO00OO00000OO0O00 in O0O0OOO0OO0OOO000[1:].split(C)]if O0O0OOO0OO0OOO000.startswith(C)else[C+O0O00OOOO0OO0O00O for O0O00OOOO0OO0O00O in O0O0OOO0OO0OOO000.split(C)])if C in O0O0OOO0OO0OOO000 else[O0O0OOO0OO0OOO000]if not B in O0O0OOO0OO0OOO000 else[B+OO0O00O0OOO0O0O00 for OO0O00O0OOO0O0O00 in O0O0OOO0OO0OOO000[1:].split(B)]if O0O0OOO0OO0OOO000.startswith(B)else[B+O00O00OOO0OO0OO00 for O00O00OOO0OO0OO00 in O0O0OOO0OO0OOO000.split(B)]for O0O0OOO0OO0OOO000 in O000000O0O000OOO0[O000000O0O000OOO0.find(K)+6:].strip().split(A,4)]for O0000OO0OOO0OOOOO in OOO000OOO0O000O00];____=A.join(___[3:]).split(A);return OO0O00OO00OO000O0('execute as {0} positioned as @s positioned {1} if block {2} {3} {4} at @s positioned {1} run {5}'.format(O000000O0O000OOO0[O000000O0O000OOO0.find(G)+7:(O000000O0O000OOO0.find(F)if E in O000000O0O000OOO0[:O000000O0O000OOO0.find(D)+5]else O000000O0O000OOO0.find(D)+1)+1].strip(),O000000O0O000OOO0[(O000000O0O000OOO0.find(F)if E in O000000O0O000OOO0[:O000000O0O000OOO0.find(D)+3]else O000000O0O000OOO0.find(D)+1)+1:O000000O0O000OOO0.find(K)-1].strip(),A.join(___[0:3]),____[0],____[1],autoTranslate(A.join(____[2:]))))
	else:___=[O00OO000O00OOOO00 for OO0O0OO0O0OO00000 in[[O000O0O0OO0OO000O]if sum([isfloatable(_O000OOO00OOOOOO00)for _O000OOO00OOOOOO00 in O000O0O0OO0OO000O])else([C+OOO0OO000OO0OOO00 for OOO0OO000OO0OOO00 in O000O0O0OO0OO000O[1:].split(C)]if O000O0O0OO0OO000O.startswith(C)else[C+OO00OOO0000OO00OO for OO00OOO0000OO00OO in O000O0O0OO0OO000O.split(C)])if C in O000O0O0OO0OO000O else[O000O0O0OO0OO000O]if not B in O000O0O0OO0OO000O else[B+OOO0O00O0OO0OO0OO for OOO0O00O0OO0OO0OO in O000O0O0OO0OO000O[1:].split(B)]if O000O0O0OO0OO000O.startswith(B)else[B+OOO0O000O0O0O0OOO for OOO0O000O0O0O0OOO in O000O0O0OO0OO000O.split(B)]for O000O0O0OO0OO000O in O000000O0O000OOO0[(O000000O0O000OOO0.find(F)if F in O000000O0O000OOO0 and sum(0 if OOO000OOOO00O0O00==A else 1 for OOO000OOOO00O0O00 in O000000O0O000OOO0[O000000O0O000OOO0.find(D)+2:O000000O0O000OOO0.find(E)])==0 else O000000O0O000OOO0.find(D)+1)+1:].strip().split(A,4)]for O00OO000O00OOOO00 in OO0O0OO0O0OO00000];return OO0O00OO00OO000O0('execute as {0} positioned as @s positioned {1} at @s positioned {1} run {2}'.format(O000000O0O000OOO0[O000000O0O000OOO0.find(G)+7:(O000000O0O000OOO0.find(F)if E in O000000O0O000OOO0[:O000000O0O000OOO0.find(D)+5]else O000000O0O000OOO0.find(D)+1)+1].strip(),A.join(___[0:3]),autoTranslate(A.join(___[3:]))))
def __main__():
	while True:
		try:O0000OO0O0OOOOOO0=input();print();print(autoTranslate(O0000OO0O0OOOOOO0));print('='*10)
		except EOFError:break
if __name__=='__main__':__main__()